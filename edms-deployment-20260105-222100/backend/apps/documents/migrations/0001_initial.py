# Generated by Django 4.2.7 on 2025-11-21 07:27

import django.core.validators
from django.db import migrations, models
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('document_number', models.CharField(db_index=True, help_text='Auto-generated unique document number', max_length=50, unique=True)),
                ('title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('keywords', models.CharField(blank=True, help_text='Comma-separated keywords for search', max_length=500)),
                ('version_major', models.PositiveIntegerField(default=1)),
                ('version_minor', models.PositiveIntegerField(default=0)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('PENDING_REVIEW', 'Pending Review'), ('UNDER_REVIEW', 'Under Review'), ('REVIEW_COMPLETED', 'Review Completed'), ('PENDING_APPROVAL', 'Pending Approval'), ('UNDER_APPROVAL', 'Under Approval'), ('APPROVED', 'Approved'), ('EFFECTIVE', 'Effective'), ('SUPERSEDED', 'Superseded'), ('OBSOLETE', 'Obsolete'), ('TERMINATED', 'Terminated')], db_index=True, default='DRAFT', max_length=20)),
                ('priority', models.CharField(choices=[('low', 'Low'), ('normal', 'Normal'), ('high', 'High'), ('critical', 'Critical')], default='normal', max_length=10)),
                ('file_name', models.CharField(blank=True, max_length=255)),
                ('file_path', models.CharField(blank=True, max_length=500)),
                ('file_size', models.BigIntegerField(blank=True, null=True)),
                ('file_checksum', models.CharField(blank=True, db_index=True, max_length=64)),
                ('mime_type', models.CharField(blank=True, max_length=100)),
                ('is_encrypted', models.BooleanField(default=False)),
                ('encryption_metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('review_date', models.DateTimeField(blank=True, null=True)),
                ('approval_date', models.DateTimeField(blank=True, null=True)),
                ('effective_date', models.DateField(blank=True, db_index=True, null=True)),
                ('review_due_date', models.DateField(blank=True, db_index=True, null=True)),
                ('obsolete_date', models.DateField(blank=True, null=True)),
                ('reason_for_change', models.TextField(blank=True)),
                ('change_summary', models.TextField(blank=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('requires_training', models.BooleanField(default=False)),
                ('is_controlled', models.BooleanField(default=True)),
                ('search_vector', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document',
                'verbose_name_plural': 'Documents',
                'db_table': 'documents',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DocumentAccessLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('access_type', models.CharField(choices=[('VIEW', 'View'), ('DOWNLOAD', 'Download'), ('PRINT', 'Print'), ('EXPORT', 'Export'), ('EDIT', 'Edit'), ('DELETE', 'Delete'), ('SHARE', 'Share'), ('COMMENT', 'Comment')], max_length=20)),
                ('access_timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('session_id', models.CharField(blank=True, max_length=40)),
                ('success', models.BooleanField(default=True)),
                ('failure_reason', models.CharField(blank=True, max_length=200)),
                ('document_version', models.CharField(blank=True, max_length=20)),
                ('file_downloaded', models.BooleanField(default=False)),
                ('access_duration', models.DurationField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document Access Log',
                'verbose_name_plural': 'Document Access Logs',
                'db_table': 'document_access_logs',
                'ordering': ['-access_timestamp'],
            },
        ),
        migrations.CreateModel(
            name='DocumentAttachment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True)),
                ('attachment_type', models.CharField(choices=[('APPENDIX', 'Appendix'), ('SUPPORTING_DATA', 'Supporting Data'), ('REFERENCE', 'Reference Material'), ('TEMPLATE', 'Template'), ('FORM', 'Form'), ('CHECKLIST', 'Checklist'), ('WORKSHEET', 'Worksheet'), ('IMAGE', 'Image'), ('DIAGRAM', 'Diagram'), ('OTHER', 'Other')], max_length=20)),
                ('file_name', models.CharField(max_length=255)),
                ('file_path', models.CharField(max_length=500)),
                ('file_size', models.BigIntegerField()),
                ('file_checksum', models.CharField(db_index=True, max_length=64)),
                ('mime_type', models.CharField(max_length=100)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_public', models.BooleanField(default=True)),
                ('requires_signature', models.BooleanField(default=False)),
                ('version', models.PositiveIntegerField(default=1)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document Attachment',
                'verbose_name_plural': 'Document Attachments',
                'db_table': 'document_attachments',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='DocumentComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('comment_type', models.CharField(choices=[('GENERAL', 'General Comment'), ('REVIEW', 'Review Comment'), ('APPROVAL', 'Approval Comment'), ('REJECTION', 'Rejection Comment'), ('QUESTION', 'Question'), ('SUGGESTION', 'Suggestion'), ('CORRECTION', 'Correction')], default='GENERAL', max_length=20)),
                ('subject', models.CharField(blank=True, max_length=200)),
                ('content', models.TextField()),
                ('page_number', models.PositiveIntegerField(blank=True, null=True)),
                ('section', models.CharField(blank=True, max_length=100)),
                ('line_reference', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_resolved', models.BooleanField(default=False)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('is_internal', models.BooleanField(default=False)),
                ('requires_response', models.BooleanField(default=False)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document Comment',
                'verbose_name_plural': 'Document Comments',
                'db_table': 'document_comments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DocumentDependency',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('dependency_type', models.CharField(choices=[('REFERENCE', 'References'), ('TEMPLATE', 'Uses as Template'), ('SUPERSEDES', 'Supersedes'), ('INCORPORATES', 'Incorporates'), ('SUPPORTS', 'Supports'), ('IMPLEMENTS', 'Implements')], default='REFERENCE', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('is_critical', models.BooleanField(default=False, help_text='Critical dependencies require notification on changes')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('is_active', models.BooleanField(default=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document Dependency',
                'verbose_name_plural': 'Document Dependencies',
                'db_table': 'document_dependencies',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DocumentSource',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('source_type', models.CharField(choices=[('original_digital', 'Original Digital'), ('scanned_paper', 'Scanned Paper Document'), ('imported_system', 'Imported from Another System'), ('email_attachment', 'Email Attachment'), ('web_upload', 'Web Upload'), ('api_creation', 'API Creation'), ('template_generation', 'Generated from Template')], max_length=30)),
                ('description', models.TextField(blank=True)),
                ('requires_verification', models.BooleanField(default=False)),
                ('requires_signature', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Document Source',
                'verbose_name_plural': 'Document Sources',
                'db_table': 'document_sources',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='DocumentType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('code', models.CharField(max_length=10, unique=True, validators=[django.core.validators.RegexValidator(message='Code must be uppercase letters, numbers, or underscores', regex='^[A-Z0-9_]+$')])),
                ('description', models.TextField(blank=True)),
                ('template_required', models.BooleanField(default=False)),
                ('template_path', models.CharField(blank=True, max_length=500)),
                ('approval_required', models.BooleanField(default=True)),
                ('review_required', models.BooleanField(default=True)),
                ('retention_years', models.IntegerField(default=7, help_text='Number of years to retain documents of this type', validators=[django.core.validators.MinValueValidator(1)])),
                ('numbering_prefix', models.CharField(blank=True, max_length=10)),
                ('numbering_format', models.CharField(default='{prefix}-{year}-{sequence:04d}', help_text='Format for auto-generated document numbers', max_length=50)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document Type',
                'verbose_name_plural': 'Document Types',
                'db_table': 'document_types',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='DocumentVersion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('version_major', models.PositiveIntegerField()),
                ('version_minor', models.PositiveIntegerField()),
                ('version_comment', models.TextField(blank=True)),
                ('file_name', models.CharField(blank=True, max_length=255)),
                ('file_path', models.CharField(blank=True, max_length=500)),
                ('file_size', models.BigIntegerField(blank=True, null=True)),
                ('file_checksum', models.CharField(blank=True, max_length=64)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('PENDING_REVIEW', 'Pending Review'), ('UNDER_REVIEW', 'Under Review'), ('REVIEW_COMPLETED', 'Review Completed'), ('PENDING_APPROVAL', 'Pending Approval'), ('UNDER_APPROVAL', 'Under Approval'), ('APPROVED', 'Approved'), ('EFFECTIVE', 'Effective'), ('SUPERSEDED', 'Superseded'), ('OBSOLETE', 'Obsolete'), ('TERMINATED', 'Terminated')], max_length=20)),
                ('change_summary', models.TextField(blank=True)),
                ('reason_for_change', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Document Version',
                'verbose_name_plural': 'Document Versions',
                'db_table': 'document_versions',
                'ordering': ['-version_major', '-version_minor', '-created_at'],
            },
        ),
    ]
