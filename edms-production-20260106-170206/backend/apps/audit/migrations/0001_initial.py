# Generated by Django 4.2.7 on 2025-11-21 07:27

import django.core.serializers.json
from django.db import migrations, models
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AuditConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True)),
                ('enable_field_tracking', models.BooleanField(default=True)),
                ('enable_relationship_tracking', models.BooleanField(default=True)),
                ('track_create', models.BooleanField(default=True)),
                ('track_update', models.BooleanField(default=True)),
                ('track_delete', models.BooleanField(default=True)),
                ('retention_days', models.IntegerField(default=2555)),
                ('compress_old_records', models.BooleanField(default=True)),
                ('async_logging', models.BooleanField(default=True)),
                ('batch_size', models.IntegerField(default=100)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Audit Configuration',
                'verbose_name_plural': 'Audit Configurations',
                'db_table': 'audit_configurations',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='AuditEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('event_type', models.CharField(choices=[('DOCUMENT_CREATED', 'Document Created'), ('DOCUMENT_PUBLISHED', 'Document Published'), ('DOCUMENT_OBSOLETED', 'Document Obsoleted'), ('WORKFLOW_COMPLETED', 'Workflow Completed'), ('USER_REGISTERED', 'User Registered'), ('ROLE_CHANGED', 'Role Changed'), ('SYSTEM_BACKUP', 'System Backup'), ('SECURITY_INCIDENT', 'Security Incident'), ('COMPLIANCE_VIOLATION', 'Compliance Violation'), ('DATA_EXPORT', 'Data Export'), ('CONFIGURATION_UPDATE', 'Configuration Update')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('duration', models.DurationField(blank=True, null=True)),
                ('is_successful', models.BooleanField(default=True)),
                ('error_message', models.TextField(blank=True)),
                ('business_process', models.CharField(blank=True, max_length=100)),
                ('compliance_impact', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Audit Event',
                'verbose_name_plural': 'Audit Events',
                'db_table': 'audit_events',
                'ordering': ['-started_at'],
            },
        ),
        migrations.CreateModel(
            name='AuditQueryLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('query_type', models.CharField(choices=[('VIEW', 'View Records'), ('SEARCH', 'Search Records'), ('EXPORT', 'Export Records'), ('REPORT', 'Generate Report'), ('FILTER', 'Filter Records')], max_length=20)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('session_id', models.CharField(blank=True, max_length=40)),
                ('query_description', models.TextField()),
                ('filters_applied', models.JSONField(blank=True, default=dict)),
                ('records_accessed', models.IntegerField(default=0)),
                ('date_from', models.DateTimeField(blank=True, null=True)),
                ('date_to', models.DateTimeField(blank=True, null=True)),
                ('purpose', models.CharField(blank=True, max_length=200)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Audit Query Log',
                'verbose_name_plural': 'Audit Query Logs',
                'db_table': 'audit_query_logs',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='AuditTrail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('action', models.CharField(choices=[('CREATE', 'Create'), ('UPDATE', 'Update'), ('DELETE', 'Delete'), ('VIEW', 'View'), ('EXPORT', 'Export'), ('IMPORT', 'Import'), ('LOGIN', 'Login'), ('LOGOUT', 'Logout'), ('ACCESS_GRANTED', 'Access Granted'), ('ACCESS_DENIED', 'Access Denied'), ('WORKFLOW_TRANSITION', 'Workflow Transition'), ('SIGNATURE_APPLIED', 'Digital Signature Applied'), ('SIGNATURE_VERIFIED', 'Digital Signature Verified'), ('ENCRYPTION', 'Encryption'), ('DECRYPTION', 'Decryption'), ('BACKUP_CREATED', 'Backup Created'), ('RESTORE_PERFORMED', 'Restore Performed'), ('CONFIGURATION_CHANGED', 'Configuration Changed'), ('ROLE_ASSIGNED', 'Role Assigned'), ('ROLE_REMOVED', 'Role Removed'), ('PASSWORD_CHANGED', 'Password Changed'), ('ACCOUNT_LOCKED', 'Account Locked'), ('ACCOUNT_UNLOCKED', 'Account Unlocked'), ('SYSTEM_EVENT', 'System Event'), ('SECURITY_EVENT', 'Security Event')], db_index=True, max_length=30)),
                ('severity', models.CharField(choices=[('INFO', 'Information'), ('WARNING', 'Warning'), ('ERROR', 'Error'), ('CRITICAL', 'Critical')], default='INFO', max_length=10)),
                ('user_display_name', models.CharField(blank=True, max_length=200)),
                ('session_id', models.CharField(blank=True, db_index=True, max_length=40)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('object_id', models.CharField(blank=True, db_index=True, max_length=100, null=True)),
                ('object_representation', models.CharField(blank=True, max_length=200)),
                ('field_changes', models.JSONField(blank=True, default=dict, encoder=django.core.serializers.json.DjangoJSONEncoder)),
                ('old_values', models.JSONField(blank=True, default=dict, encoder=django.core.serializers.json.DjangoJSONEncoder)),
                ('new_values', models.JSONField(blank=True, default=dict, encoder=django.core.serializers.json.DjangoJSONEncoder)),
                ('description', models.TextField(blank=True)),
                ('module', models.CharField(blank=True, max_length=10)),
                ('request_path', models.CharField(blank=True, max_length=500)),
                ('request_method', models.CharField(blank=True, max_length=10)),
                ('checksum', models.CharField(blank=True, max_length=64)),
                ('is_tampered', models.BooleanField(default=False)),
                ('verification_status', models.CharField(default='VERIFIED', max_length=20)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Audit Log Entry',
                'verbose_name_plural': 'Audit Log Entries',
                'db_table': 'audit_trail',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('event_type', models.CharField(choices=[('VALIDATION', 'Validation Event'), ('VIOLATION', 'Compliance Violation'), ('REVIEW', 'Compliance Review'), ('AUDIT', 'Audit Event')], max_length=20)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('description', models.TextField()),
                ('severity', models.CharField(default='INFO', max_length=10)),
                ('resolution_status', models.CharField(default='OPEN', max_length=20)),
            ],
            options={
                'db_table': 'compliance_events',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('report_type', models.CharField(choices=[('CFR_PART_11', '21 CFR Part 11 Compliance'), ('USER_ACTIVITY', 'User Activity Report'), ('DOCUMENT_LIFECYCLE', 'Document Lifecycle Report'), ('ACCESS_CONTROL', 'Access Control Report'), ('SECURITY_EVENTS', 'Security Events Report'), ('SYSTEM_CHANGES', 'System Changes Report'), ('SIGNATURE_VERIFICATION', 'Digital Signature Report'), ('DATA_INTEGRITY', 'Data Integrity Report'), ('CUSTOM', 'Custom Report')], max_length=30)),
                ('description', models.TextField(blank=True)),
                ('date_from', models.DateTimeField()),
                ('date_to', models.DateTimeField()),
                ('filters', models.JSONField(blank=True, default=dict)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('GENERATING', 'Generating'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed'), ('ARCHIVED', 'Archived')], default='GENERATING', max_length=20)),
                ('report_data', models.JSONField(blank=True, default=dict)),
                ('summary_stats', models.JSONField(blank=True, default=dict)),
                ('file_path', models.CharField(blank=True, max_length=500)),
                ('file_size', models.BigIntegerField(default=0)),
                ('report_checksum', models.CharField(blank=True, max_length=64)),
                ('digital_signature', models.TextField(blank=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('is_archived', models.BooleanField(default=False)),
                ('archived_at', models.DateTimeField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Compliance Report',
                'verbose_name_plural': 'Compliance Reports',
                'db_table': 'compliance_reports',
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='DatabaseChangeLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('table_name', models.CharField(max_length=100)),
                ('operation', models.CharField(max_length=20)),
                ('record_id', models.CharField(max_length=100)),
                ('old_values', models.JSONField(blank=True, default=dict)),
                ('new_values', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'db_table': 'database_change_log',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='DataIntegrityCheck',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('check_type', models.CharField(choices=[('CHECKSUM', 'Checksum Verification'), ('SIGNATURE', 'Digital Signature Verification'), ('AUDIT_TRAIL', 'Audit Trail Integrity'), ('DATABASE', 'Database Integrity'), ('FILE_SYSTEM', 'File System Integrity'), ('BACKUP', 'Backup Integrity'), ('ENCRYPTION', 'Encryption Integrity')], max_length=20)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('scope', models.CharField(max_length=200)),
                ('parameters', models.JSONField(blank=True, default=dict)),
                ('status', models.CharField(choices=[('RUNNING', 'Running'), ('PASSED', 'Passed'), ('FAILED', 'Failed'), ('WARNING', 'Warning'), ('ERROR', 'Error')], default='RUNNING', max_length=20)),
                ('items_checked', models.IntegerField(default=0)),
                ('items_passed', models.IntegerField(default=0)),
                ('items_failed', models.IntegerField(default=0)),
                ('findings', models.JSONField(blank=True, default=list)),
                ('recommendations', models.TextField(blank=True)),
                ('is_automated', models.BooleanField(default=False)),
                ('execution_time', models.DurationField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'verbose_name': 'Data Integrity Check',
                'verbose_name_plural': 'Data Integrity Checks',
                'db_table': 'data_integrity_checks',
                'ordering': ['-started_at'],
            },
        ),
        migrations.CreateModel(
            name='LoginAudit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('username', models.CharField(max_length=150)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('success', models.BooleanField()),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('failure_reason', models.CharField(blank=True, max_length=200)),
            ],
            options={
                'db_table': 'login_audit',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='SystemEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('event_type', models.CharField(choices=[('STARTUP', 'System Startup'), ('SHUTDOWN', 'System Shutdown'), ('ERROR', 'System Error'), ('WARNING', 'System Warning'), ('MAINTENANCE', 'Maintenance Event'), ('BACKUP', 'Backup Event'), ('UPDATE', 'System Update')], max_length=20)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('description', models.TextField()),
                ('details', models.JSONField(blank=True, default=dict)),
                ('severity', models.CharField(default='INFO', max_length=10)),
            ],
            options={
                'db_table': 'system_events',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='UserSession',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('session_key', models.CharField(max_length=40, unique=True)),
                ('ip_address', models.GenericIPAddressField()),
                ('user_agent', models.TextField()),
                ('login_timestamp', models.DateTimeField(auto_now_add=True)),
                ('last_activity', models.DateTimeField(auto_now=True)),
                ('logout_timestamp', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'db_table': 'user_sessions_audit',
                'ordering': ['-login_timestamp'],
            },
        ),
    ]
